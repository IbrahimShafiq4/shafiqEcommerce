"use strict";(self.webpackChunkeCommerce=self.webpackChunkeCommerce||[]).push([[879],{8879:(q,c,p)=>{p.r(c),p.d(c,{SettingsModule:()=>U});var d=p(6895),u=p(9427),e=p(1571);let g=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-changepassword"]],decls:2,vars:0,template:function(r,s){1&r&&(e.TgZ(0,"p"),e._uU(1,"changepassword works!"),e.qZA())}}),t})();var n=p(433),w=p(1135),f=p(529);let h=(()=>{class t{constructor(r){this._HttpClient=r,this.userData=new w.X(null),this.headers={token:localStorage.getItem("userToken")}}resetPassword(r,s,a){return this._HttpClient.put("https://route-ecommerce.onrender.com/api/v1/users/changeMyPassword",{currentPassword:r,password:s,rePassword:a},{headers:this.headers})}}return t.\u0275fac=function(r){return new(r||t)(e.LFG(f.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var _=p(7185);function v(t,o){1&t&&(e.TgZ(0,"p",13),e._uU(1,"Password Must Start With Uppercase then from 5 to 10 charcters"),e.qZA())}function Z(t,o){1&t&&(e.TgZ(0,"p",13),e._uU(1,"Password is Required"),e.qZA())}function C(t,o){if(1&t&&(e.TgZ(0,"div",11),e.YNc(1,v,2,0,"p",12),e.ALo(2,"json"),e.YNc(3,Z,2,0,"p",12),e.ALo(4,"json"),e.qZA()),2&t){const r=e.oxw();let s,a;e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,null==(s=r.resetForm.get("currentPassword"))?null:s.getError("pattern"))),e.xp6(2),e.Q6J("ngIf",e.lcZ(4,4,null==(a=r.resetForm.get("currentPassword"))?null:a.getError("required")))}}function T(t,o){1&t&&(e.TgZ(0,"p",13),e._uU(1,"password Must Start With Uppercase then from 5 to 10 charcters"),e.qZA())}function P(t,o){1&t&&(e.TgZ(0,"p",13),e._uU(1,"password is Required"),e.qZA())}function F(t,o){if(1&t&&(e.TgZ(0,"div",11),e.YNc(1,T,2,0,"p",12),e.ALo(2,"json"),e.YNc(3,P,2,0,"p",12),e.ALo(4,"json"),e.qZA()),2&t){const r=e.oxw();let s,a;e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,null==(s=r.resetForm.get("password"))?null:s.getError("pattern"))),e.xp6(2),e.Q6J("ngIf",e.lcZ(4,4,null==(a=r.resetForm.get("password"))?null:a.getError("required")))}}function A(t,o){1&t&&(e.TgZ(0,"p",13),e._uU(1,"rePassword Must Start With Uppercase then from 5 to 10 charcters"),e.qZA())}function R(t,o){1&t&&(e.TgZ(0,"p",13),e._uU(1,"rePassword is Required"),e.qZA())}function S(t,o){if(1&t&&(e.TgZ(0,"div",11),e.YNc(1,A,2,0,"p",12),e.ALo(2,"json"),e.YNc(3,R,2,0,"p",12),e.ALo(4,"json"),e.qZA()),2&t){const r=e.oxw();let s,a;e.xp6(1),e.Q6J("ngIf",e.lcZ(2,2,null==(s=r.resetForm.get("rePassword"))?null:s.getError("pattern"))),e.xp6(2),e.Q6J("ngIf",e.lcZ(4,4,null==(a=r.resetForm.get("rePassword"))?null:a.getError("required")))}}function x(t,o){1&t&&e._UZ(0,"i",14)}function I(t,o){1&t&&(e.TgZ(0,"span"),e._uU(1,"Reset"),e.qZA())}let y=(()=>{class t{constructor(r,s,a){this._SettingsService=r,this._Router=s,this.toastr=a,this.isLoading=!1,this.apiError="",this.resetForm=new n.cw({currentPassword:new n.NI(null,[n.kI.required,n.kI.pattern(/^[A-Z][a-z0-9]{5,10}$/)]),password:new n.NI(null,[n.kI.required,n.kI.pattern(/^[A-Z][a-z0-9]{5,10}$/)]),rePassword:new n.NI(null,[n.kI.required,n.kI.pattern(/^[A-Z][a-z0-9]{5,10}$/)])})}handleResetForm(r){this.isLoading=!0,r.valid&&this._SettingsService.resetPassword(this.resetForm.get("currentPassword")?.value,this.resetForm.get("password")?.value,this.resetForm.get("rePassword")?.value).subscribe({next:s=>{"success"===s.message&&(this._Router.navigate(["/home"]),this.isLoading=!1,this.toastr.success(s.message))},error:s=>{this.isLoading=!1,console.log(s),this.apiError=s.error.message,this.toastr.success(s.error.message.split(" ").slice(0,7).join(" "))}})}}return t.\u0275fac=function(r){return new(r||t)(e.Y36(h),e.Y36(u.F0),e.Y36(_._W))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-resetpassword"]],decls:16,vars:7,consts:[[1,"text-center",3,"formGroup","ngSubmit"],["for","password"],["formControlName","currentPassword","type","password","id","password",1,"d-block","my-2"],["class","alert alertDiv text-white fw-bold my-3",4,"ngIf"],["for","newPassword"],["formControlName","password","type","password","id","newPassword",1,"d-block","my-2"],["for","rePassword"],["formControlName","rePassword","type","password","id","rePassword",1,"d-block","my-2"],["type","submit",1,"reg","text-white","fw-bold",3,"disabled"],["class","fas fa-spinner fa-spin text-white",4,"ngIf"],[4,"ngIf"],[1,"alert","alertDiv","text-white","fw-bold","my-3"],["class","m-0",4,"ngIf"],[1,"m-0"],[1,"fas","fa-spinner","fa-spin","text-white"]],template:function(r,s){if(1&r&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return s.handleResetForm(s.resetForm)}),e.TgZ(1,"label",1),e._uU(2,"Current Password :"),e.qZA(),e._UZ(3,"input",2),e.YNc(4,C,5,6,"div",3),e.TgZ(5,"label",4),e._uU(6,"new Password :"),e.qZA(),e._UZ(7,"input",5),e.YNc(8,F,5,6,"div",3),e.TgZ(9,"label",6),e._uU(10,"rePassword :"),e.qZA(),e._UZ(11,"input",7),e.YNc(12,S,5,6,"div",3),e.TgZ(13,"button",8),e.YNc(14,x,1,0,"i",9),e.YNc(15,I,2,0,"span",10),e.qZA()()),2&r){let a,i,l;e.Q6J("formGroup",s.resetForm),e.xp6(4),e.Q6J("ngIf",(null==(a=s.resetForm.get("currentPassword"))?null:a.errors)&&(null==(a=s.resetForm.get("currentPassword"))?null:a.touched)),e.xp6(4),e.Q6J("ngIf",(null==(i=s.resetForm.get("password"))?null:i.errors)&&(null==(i=s.resetForm.get("password"))?null:i.touched)),e.xp6(4),e.Q6J("ngIf",(null==(l=s.resetForm.get("rePassword"))?null:l.errors)&&(null==(l=s.resetForm.get("rePassword"))?null:l.touched)),e.xp6(1),e.Q6J("disabled",s.resetForm.invalid),e.xp6(1),e.Q6J("ngIf",s.isLoading),e.xp6(1),e.Q6J("ngIf",!s.isLoading)}},dependencies:[d.O5,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,d.Ts]}),t})();var m=p(9893);const J=[{path:"",redirectTo:"reset",pathMatch:"full"},{path:"change",canActivate:[m.a],component:g,title:"change password"},{path:"reset",canActivate:[m.a],component:y,title:"reset password"}];let N=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.Bz.forChild(J),u.Bz,n.u5,n.UX]}),t})(),U=(()=>{class t{}return t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.ez,N]}),t})()}}]);